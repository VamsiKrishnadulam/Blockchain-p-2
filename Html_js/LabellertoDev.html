<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js"
  integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  
</head>
<body onload="connectMetamask()">
    
    <nav class="navbar navbar-expand-lg bg-dark fixed-top">
        <div class="container-fluid">
          <div class="navbar-brand text-white" href="#">PMS</div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="d-flex justify-content-end">
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <div class="nav-item">
              <button class="btn btn-dark"  onclick="window.open('Aboutus.html')">ABOUT US</button>
            </div>
            <!-- <div class="nav-item">
              <button class="btn btn-dark" onclick="window.open('Register.html')">Register</button>
            </div> -->
            <div class="nav-item">
                <button class="btn btn-dark" onclick="window.open('page1.html')">
                    LOG-IN
                </button>
            </div>
            <div class="nav-item">
                <button class="btn btn-dark" onclick="window.open('contact.html')">
                    CONTACT US
                </button>
            </div>
          </div>
        </div>
      </div>
    </div>
      </nav>
    

      <br><br>
      <h1>END USER FEED BACK</h1><br><br>
      <div class="container">
        <div class="card text-center">
            <div class="card-header">
              
              <ul class="nav nav-pills card-header-pills">
                
               
                <li class="nav-item mx-2">
                  <button class="btn btn-dark">get updates</button>
                </li>
                <li class="nav-item mx-2">
                    <button class="btn btn-dark" onclick="window.open('EndUserReportBugs.html')">Report A Bug</button>
                </li>
                
              </ul>
            </div>
            <div class="card-body">
                <form action="">
                    
                  <div class="container">
                      <div class="form-group ">
                        <div class="row">
                        <!-- <label for="exampleDropdown">Select an option:</label> -->
                        <div class="col-12 col-lg-6 mx-auto">
                          <!-- <h5 class="d-flex align-items-center">BUGS</h5> -->
                          <!-- <input type="text" class="form-control " id="exampleDropdown" list="exampleOptions" size="20" placeholder="Select BUGS or Enter Bugs">
                        <datalist id="exampleOptions" >
                          <option value="App crashes when attempting to open a file" class="col-6" >
                          <option value="Error message appears when trying to submit a form" class="col-6">
                          <option value="BUG-3" class="col-6">
                        </datalist> --> 
                        <div class="form-group">
                          <!-- <label for="exampleBugs">BUGS</label> -->
                          <input  class="form-control" id="Bugs"  placeholder="Enter Bugs">
                        </div>
                        </div>
                        </div>
                        <br>
                        <div class="row">
                          <div class="col-12 col-lg-6 mx-auto">
                            <div class="input-group mb-3 ">
                              <textarea type='text' class="form-control" id="description" name="Description" rows="5" cols="100" placeholder="Description"></textarea>
                              <!-- <br> -->
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-12 col-lg-6 mx-auto">
                            <div class="input-group mb-3 ">
                              <textarea type='text' class="ReproduceBugs form-control" id="ReproduceBugs" name="Description" rows="5" cols="100" placeholder="Steps to reproduce Bugs"></textarea>
                              <!-- <br> -->
                            </div>
                          </div>
                        </div>

                        </div>
                        <br><br>
                        
                        <div class="row">
                          <div class="col-12 col-lg-6 mx-auto">
                            <div>
                              <div class="btn btn-dark" onclick="sendfeedback()">Submit</div>
                            </div>
    
                          </div>
                          
                          
                        </div>
                       
                      </div>

                    </div>
                  </form>
                </div>
              </div>
            </div>
      <script>
        let account;
const connectMetamask = async () => {
    
    if(window.ethereum !== "undefined"){
        const accounts = await ethereum.request({method: "eth_requestAccounts"});
        account = accounts[0];
    }
    const ABI =[
        {
            "inputs": [
                {
                    "internalType": "string",
                    "name": "_bugs",
                    "type": "string"
                },
                {
                    "internalType": "string",
                    "name": "_des",
                    "type": "string"
                },
                {
                    "internalType": "string",
                    "name": "_steps",
                    "type": "string"
                },
                {
                    "internalType": "string",
                    "name": "_environmentDetails",
                    "type": "string"
                }
            ],
            "name": "feedbacks",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "get",
            "outputs": [
                {
                    "components": [
                        {
                            "internalType": "string",
                            "name": "bugs",
                            "type": "string"
                        },
                        {
                            "internalType": "string",
                            "name": "description",
                            "type": "string"
                        },
                        {
                            "internalType": "string",
                            "name": "stepsToReproduceBugs",
                            "type": "string"
                        },
                        {
                            "internalType": "string",
                            "name": "environmentDetails",
                            "type": "string"
                        }
                    ],
                    "internalType": "struct feedback.report[]",
                    "name": "",
                    "type": "tuple[]"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        }
    ];
    const Address = "0xdE29E1b0c010b2e3468cef6D5d983AB8D8c8Ab07";
    window.web3 = await new Web3(window.ethereum);
    window.contract = await new window.web3.eth.Contract(ABI, Address);
}
        const sendfeedback=async()=>{
            const bugs = document.getElementById("Bugs").value;
            const description = document.getElementById("description").value;
            const ReproduceBugs = document.getElementById("ReproduceBugs").value;
            const environmentdetails = document.getElementById("environmentdetails").value;
            await window.contract.methods.feedbacks(bugs,description,ReproduceBugs,environmentdetails).send({ from: account });
        }
      </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>