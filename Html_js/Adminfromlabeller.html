<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js"
		integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

	<style>
		.navbar-toggler {
			border-color: white;
		}

		.navbar-toggler-icon {
			background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(0, 128, 0, 0.8)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E");
		}

		form {
			border: solid black;
			padding: 10px;
		}
	</style>
</head>

<body onload="connectMetamask()">
	<nav class="navbar navbar-expand-lg bg-dark">
		<div class="container-fluid">
			<button class="navbar-brand text-white btn btn-dark" onclick="showimage()" href="#">PMS</button>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
				aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="d-flex justify-content-end">
				<div class="collapse navbar-collapse" id="navbarNavDropdown">
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('EndUserReportBugs.html')">End User</button>
					</div>
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('labeller.html')">Labeller</button>
					</div>
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('Adminfromlabeller.html')">Admin</button>
					</div>
					<div class="nav-item">
						<button class="btn btn-dark"
							onclick="window.open('Patchcreationdeveloper.html')">Developer</button>
					</div>
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('verifier.html')">Verifier</button>
					</div>
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('Aboutus.html')">ABOUT US</button>
					</div>
					<!-- <div class="nav-item">
						  <button class="btn btn-dark" onclick="window.open('Register.html')">Register</button>
						</div> -->
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('page1.html')">
							LOG-IN
						</button>
					</div>
					<div class="nav-item">
						<button class="btn btn-dark" onclick="window.open('contact.html')">
							CONTACT US
						</button>
					</div>
				</div>
			</div>
		</div>
		</div>
	</nav>
	<br><br>
	<div id="TransactionSuccessfull">

	</div>
	<div class="container">
		<div id="showimage">

		</div>
	</div>

	<br><br><br>

	<div class="container">
		<div class="card">
			<div class="card-header ">
				<ul class="nav nav-pills card-header-pills d-flex justify-content-evenly">
					<li class="nav-item mx-2 col-sm">
						<button class="btn btn-dark" onclick="window.open('Adminfromlabeller.html')">Admin Request Form
						</button>
					</li>
					<li class="nav-item mx-2 col-sm">
						<button class="btn btn-dark" onclick="window.open('adminPatchfromverifier.html')">Deploy
							Patches</button>
					</li>
					<li class="nav-item mx-2 col-sm">
						<button class="btn btn-dark" onclick="window.open('admingetsdetails.html')">Tracking
							Patches</button>
					</li>
					<li class="nav-item mx-2 col-sm">
						<button class="btn btn-dark" onclick="window.open('getDownloadHistory.html')">Get download
							History
						</button>
					</li>
				</ul>
			</div>
			<div class=" d-flex align-items-end my-5">
				<div class="dropdown row mx-auto">
					<label for="mySelect" class="col">
						<h5>Select Software </h5>
					</label>
					<select id="mySelect" class="form-control col-6" onchange="recievefeedback()">
						<option value="Select Software" selected>Select Software</option>
						<option value="Windows11">Windows11</option>
						<option value="Windows10">Windows10</option>
						<option value="Mac12">Mac12</option>
						<option value="Mac11">Mac11</option>
					</select>

				</div>
			</div>
			<div class="container">
				<div class="row">
					<h3 class="col-sm-6 mt-2" id="bugs_selection">Bugs:</h3>
					<h3 class="col-sm-6 mt-2" id="features_selection">Features:</h3>
				</div>
			</div>
			<div class="d-flex justify-content-center ">
				<button class="btn btn-dark mx-6 " type="button" onclick="selectedonce()">selected Bugs and
					Features</button>
			</div>
			<br><br>
			<br><br>
			<div class="container">
				<form class="border rounded mx-auto box">
					<div class="container">
						<div class="row">
							<div class="col-6 ">
								<h5> REQUEST TO DEVELOPER </h5>
							</div>
						</div>
						<br><br>
						<div class="row">
							<div class="col-6 mx-auto" id="selectedBugs">
								<h3>Bugs You Have Selected</h3>
							</div>
							<div class="col-6 mx-auto" id="selectedfeatures">
								<h3>Features You Have Selected</h3>
							</div>
						</div>
						<div class="row my-5">
							<div class="col-6 mx-auto my-4">
								<label for="">
									<h5>Target Date</h5>
								</label>
								<input type="date" class="mx-4" id="Date">
							</div>

						</div>
						<div class="row my-5">
							<div class="col-6 mx-auto  ">
								<label for="">
									<h5>Request No</h5>
								</label>
								<input type="number" placeholder="1" class="mx-4" id="RequestNo" readonly>
							</div>

						</div>
						<div class="row ">
							<div class="col-6 mx-auto  ">
								<button class="btn btn-dark col-6" type="button" onclick="requestdev()">Send Request
									To
									Develeper</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<script>
			Array.prototype.remove = function (element) {
				const index = this.indexOf(element);
				if (index > -1) {
					this.splice(index, 1);
				}
			}
			let account;
			const connectMetamask = async () => {
				if (window.ethereum !== "undefined") {
					const accounts = await ethereum.request({ method: "eth_requestAccounts" });
					account = accounts[0];
				}
				const ABI = [
					{
						"inputs": [],
						"stateMutability": "nonpayable",
						"type": "constructor"
					},
					{
						"inputs": [],
						"name": "admin",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "developer",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string[]",
								"name": "_bugs",
								"type": "string[]"
							},
							{
								"internalType": "string[]",
								"name": "_features",
								"type": "string[]"
							},
							{
								"internalType": "string",
								"name": "_environmentDetails",
								"type": "string"
							}
						],
						"name": "feedbacks",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "get",
						"outputs": [
							{
								"components": [
									{
										"internalType": "string",
										"name": "environmentDetails",
										"type": "string"
									},
									{
										"internalType": "string[]",
										"name": "bugs",
										"type": "string[]"
									},
									{
										"internalType": "string[]",
										"name": "features",
										"type": "string[]"
									},
									{
										"internalType": "uint256[]",
										"name": "bugspriority",
										"type": "uint256[]"
									},
									{
										"internalType": "uint256[]",
										"name": "featurespriority",
										"type": "uint256[]"
									},
									{
										"internalType": "uint256[]",
										"name": "labelstatus",
										"type": "uint256[]"
									},
									{
										"internalType": "uint256[]",
										"name": "labelstatusfeatures",
										"type": "uint256[]"
									}
								],
								"internalType": "struct feedback.report[]",
								"name": "",
								"type": "tuple[]"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "labeller",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "reports",
						"outputs": [
							{
								"internalType": "string",
								"name": "environmentDetails",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"components": [
									{
										"internalType": "string",
										"name": "bug",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "priority",
										"type": "uint256"
									}
								],
								"internalType": "struct feedback.bugsprio[]",
								"name": "keyvaluepair",
								"type": "tuple[]"
							},
							{
								"components": [
									{
										"internalType": "string",
										"name": "feature",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "priorityfeature",
										"type": "uint256"
									}
								],
								"internalType": "struct feedback.featuresprio[]",
								"name": "keyvaluepairfeature",
								"type": "tuple[]"
							}
						],
						"name": "setbugfeaturePriority",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string[]",
								"name": "bugsforlabel",
								"type": "string[]"
							},
							{
								"internalType": "string[]",
								"name": "featuresforlabel",
								"type": "string[]"
							}
						],
						"name": "setbugfeaturelabel",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "verifier",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					}
				];
				const Address = "0xbC59E6a52fA17C6bec9a4FDc09a518435cad2297";
				window.web3 = await new Web3(window.ethereum);
				window.contract = await new window.web3.eth.Contract(ABI, Address);
				const ABI2 = [
					{
						"inputs": [],
						"stateMutability": "nonpayable",
						"type": "constructor"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							}
						],
						"name": "Deployed",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "PatchArray",
						"outputs": [
							{
								"internalType": "string",
								"name": "patchname",
								"type": "string"
							},
							{
								"internalType": "bytes",
								"name": "fileData",
								"type": "bytes"
							},
							{
								"internalType": "string",
								"name": "patchplatform",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "patchfeatures",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "time",
								"type": "uint256"
							},
							{
								"internalType": "string",
								"name": "verificationstatus",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "deploymentstatus",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "patchno",
								"type": "uint256"
							},
							{
								"internalType": "uint256",
								"name": "requestnumber",
								"type": "uint256"
							},
							{
								"internalType": "uint256",
								"name": "deployedTimeStamp",
								"type": "uint256"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "admin",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "check",
						"outputs": [
							{
								"internalType": "bool",
								"name": "",
								"type": "bool"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "developer",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							}
						],
						"name": "findandreply",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							}
						],
						"name": "findandreplynotverified",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "getdetails",
						"outputs": [
							{
								"components": [
									{
										"internalType": "string",
										"name": "patchname",
										"type": "string"
									},
									{
										"internalType": "bytes",
										"name": "fileData",
										"type": "bytes"
									},
									{
										"internalType": "string",
										"name": "patchplatform",
										"type": "string"
									},
									{
										"internalType": "string",
										"name": "patchfeatures",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "time",
										"type": "uint256"
									},
									{
										"internalType": "string",
										"name": "verificationstatus",
										"type": "string"
									},
									{
										"internalType": "string",
										"name": "deploymentstatus",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "patchno",
										"type": "uint256"
									},
									{
										"internalType": "uint256",
										"name": "requestnumber",
										"type": "uint256"
									},
									{
										"internalType": "uint256",
										"name": "deployedTimeStamp",
										"type": "uint256"
									}
								],
								"internalType": "struct RegisterPatch.Patch[]",
								"name": "",
								"type": "tuple[]"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "getdetailsRequest",
						"outputs": [
							{
								"components": [
									{
										"internalType": "string[]",
										"name": "bugs",
										"type": "string[]"
									},
									{
										"internalType": "string[]",
										"name": "features",
										"type": "string[]"
									},
									{
										"internalType": "string",
										"name": "date",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "requestno",
										"type": "uint256"
									},
									{
										"internalType": "string",
										"name": "software",
										"type": "string"
									}
								],
								"internalType": "struct RegisterPatch.request[]",
								"name": "",
								"type": "tuple[]"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "labeller",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"name": "map",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"name": "map2",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "patches",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "requestArray",
						"outputs": [
							{
								"internalType": "string",
								"name": "date",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "requestno",
								"type": "uint256"
							},
							{
								"internalType": "string",
								"name": "software",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "result",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "bytes",
								"name": "_filedata",
								"type": "bytes"
							},
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "_patchplatform",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "_patchfeatures",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "_patchno",
								"type": "uint256"
							},
							{
								"internalType": "uint256",
								"name": "_requestnumber",
								"type": "uint256"
							}
						],
						"name": "setPatch",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string[]",
								"name": "_bugs",
								"type": "string[]"
							},
							{
								"internalType": "string[]",
								"name": "_features",
								"type": "string[]"
							},
							{
								"internalType": "string",
								"name": "_date",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "_requestno",
								"type": "uint256"
							},
							{
								"internalType": "string",
								"name": "_software",
								"type": "string"
							}
						],
						"name": "setRequest",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "verifier",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					}
				];
				const Address2 = "0x58d9825e8Cb33e78989FD76663A5774fB280bF4c";
				window.web3 = await new Web3(window.ethereum);
				window.contract2 = await new window.web3.eth.Contract(ABI2, Address2);
				window.contract2.methods.getdetailsRequest().call().then((result) => {
					// console.log("nbvnb");
					console.log(result);
					// console.log("anbvhvnbv")
					document.getElementById("RequestNo").value = result.length + 1;
				});
			}
			async function recievefeedback() {
				window.contract.methods.get().call().then((result) => {
					console.log(result);
					cell = document.createElement("ul");
					for (let i = 0; i < result.length; i++) {
						const b = document.getElementById("bugs_selection");
						cell.classList.add("list-group");
						b.appendChild(cell);
						for (let j = 0; j < (result[i].bugs.length); j++) {
							if (result[i].labelstatus[j] == 0 && result[i].bugspriority[j] != 0 && document.getElementById("mySelect").value == result[i][0]) {
								const cell2 = document.createElement("li");
								cell2.classList.add("list-group-item");
								const cell5 = document.createElement("h5");
								const li2 = document.createElement("li");
								li2.classList.add("list-group-item");
								const cell4 = document.createElement("h5");
								cell4.innerHTML = "priority : " + result[i].bugspriority[j];
								const cell3 = document.createElement("input");
								cell3.type = "checkbox";
								// cell3.id = "bugs" + `${(reslenbugs)}`;
								cell3.addEventListener("change", function () {
									if (this.checked) {
										selectedbugs(result[i].bugs[j]);
									}
									else {
										removeselectedbugs(result[i].bugs[j]);
									}
								});
								cell3.style.webkitTransform = 'scale(1.5)';
								cell3.classList.add("justify-content-end", "mx-4");
								cell5.innerHTML = result[i].bugs[j];
								cell.appendChild(document.createElement("br"));
								cell.appendChild(cell2);
								cell.appendChild(li2)
								cell2.appendChild(cell5);
								li2.appendChild(cell4);

								cell5.appendChild(cell3);
							}
						}
					}
					cell = document.createElement("ul");
					for (let i = 0; i < result.length; i++) {
						const b = document.getElementById("features_selection");
						cell.classList.add("list-group");
						b.appendChild(cell);
						for (let j = 0; j < (result[i].features.length); j++) {
							if (result[i].labelstatusfeatures[j] == 0 && result[i].featurespriority[j] != 0 && document.getElementById("mySelect").value == result[i].environmentDetails) {
								const cell2 = document.createElement("li");
								cell2.classList.add("list-group-item");
								const cell5 = document.createElement("h5");
								const li2 = document.createElement("li");
								li2.classList.add("list-group-item");
								const cell4 = document.createElement("h5");
								cell4.innerHTML = "priority : " + result[i].featurespriority[j];

								const cell3 = document.createElement("input");
								cell3.type = "checkbox";
								cell3.addEventListener("change", function () {
									if (this.checked) {
										selectedfeatures(result[i].features[j]);
									} else {
										removeselectedfeatures(result[i].features[j]);
									}
								});
								cell3.style.webkitTransform = 'scale(1.5)';
								cell3.classList.add("justify-content-end", "mx-4");
								cell5.innerHTML = result[i].features[j];
								cell.appendChild(document.createElement("br"));
								cell.appendChild(cell2);
								cell.appendChild(li2)
								cell2.appendChild(cell5);
								// cell2.appendChild(cell4);
								li2.appendChild(cell4);


								cell5.appendChild(cell3);
							}
						}
					}


				})
			}
			const arr_bugs = [];
			const selectedbugs = (name) => {
				arr_bugs.push(name);
			}
			const arr_features = [];
			const selectedfeatures = (name) => {
				arr_features.push(name);
			}
			const removeselectedbugs = (name) => {
				arr_bugs.remove(name);
			}
			const removeselectedfeatures = (name) => {
				arr_features.remove(name);
			}
			const selectedonce = async () => {
				console.log(arr_features);
				console.log(arr_bugs);

				const featuresSet = new Set(arr_features);
				const newArrayfeatures = Array.from(featuresSet);

				const bugsset = new Set(arr_bugs);
				const newArraybugs = Array.from(bugsset);


				const cell0 = document.getElementById("selectedBugs");
				cell = document.createElement("ul");
				cell.classList.add("list-group", "mx-auto", "row");
				for (let i = 0; i < newArraybugs.length; i++) {
					const cell2 = document.createElement("li");
					cell2.classList.add("list-group-item", "mr-3", "col-6");
					cell2.textContent = newArraybugs[i];
					cell.appendChild(cell2);
					cell.appendChild(document.createElement("br"));
				}
				cell0.appendChild(cell);
				const cell10 = document.getElementById("selectedfeatures");
				cell11 = document.createElement("ul");
				cell11.classList.add("list-group", "mx-auto", "row");
				for (let j = 0; j < newArrayfeatures.length; j++) {
					const cell12 = document.createElement("li");
					cell12.classList.add("list-group-item", "mr-3", "col-6");
					cell12.textContent = newArrayfeatures[j];
					cell11.appendChild(cell12);
					cell11.appendChild(document.createElement("br"));
					cell10.appendChild(cell11);
				}
			}
			const requestdev = async () => {
				window.contract.methods.setbugfeaturelabel(arr_bugs, arr_features).send({ from: account }).then((result) => {
					console.log(result);
				});
				const ABI2 = [
					{
						"inputs": [],
						"stateMutability": "nonpayable",
						"type": "constructor"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							}
						],
						"name": "Deployed",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "PatchArray",
						"outputs": [
							{
								"internalType": "string",
								"name": "patchname",
								"type": "string"
							},
							{
								"internalType": "bytes",
								"name": "fileData",
								"type": "bytes"
							},
							{
								"internalType": "string",
								"name": "patchplatform",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "patchfeatures",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "time",
								"type": "uint256"
							},
							{
								"internalType": "string",
								"name": "verificationstatus",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "deploymentstatus",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "patchno",
								"type": "uint256"
							},
							{
								"internalType": "uint256",
								"name": "requestnumber",
								"type": "uint256"
							},
							{
								"internalType": "uint256",
								"name": "deployedTimeStamp",
								"type": "uint256"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "admin",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "check",
						"outputs": [
							{
								"internalType": "bool",
								"name": "",
								"type": "bool"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "developer",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							}
						],
						"name": "findandreply",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							}
						],
						"name": "findandreplynotverified",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "getdetails",
						"outputs": [
							{
								"components": [
									{
										"internalType": "string",
										"name": "patchname",
										"type": "string"
									},
									{
										"internalType": "bytes",
										"name": "fileData",
										"type": "bytes"
									},
									{
										"internalType": "string",
										"name": "patchplatform",
										"type": "string"
									},
									{
										"internalType": "string",
										"name": "patchfeatures",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "time",
										"type": "uint256"
									},
									{
										"internalType": "string",
										"name": "verificationstatus",
										"type": "string"
									},
									{
										"internalType": "string",
										"name": "deploymentstatus",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "patchno",
										"type": "uint256"
									},
									{
										"internalType": "uint256",
										"name": "requestnumber",
										"type": "uint256"
									},
									{
										"internalType": "uint256",
										"name": "deployedTimeStamp",
										"type": "uint256"
									}
								],
								"internalType": "struct RegisterPatch.Patch[]",
								"name": "",
								"type": "tuple[]"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "getdetailsRequest",
						"outputs": [
							{
								"components": [
									{
										"internalType": "string[]",
										"name": "bugs",
										"type": "string[]"
									},
									{
										"internalType": "string[]",
										"name": "features",
										"type": "string[]"
									},
									{
										"internalType": "string",
										"name": "date",
										"type": "string"
									},
									{
										"internalType": "uint256",
										"name": "requestno",
										"type": "uint256"
									},
									{
										"internalType": "string",
										"name": "software",
										"type": "string"
									}
								],
								"internalType": "struct RegisterPatch.request[]",
								"name": "",
								"type": "tuple[]"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "labeller",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"name": "map",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"name": "map2",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "patches",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "requestArray",
						"outputs": [
							{
								"internalType": "string",
								"name": "date",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "requestno",
								"type": "uint256"
							},
							{
								"internalType": "string",
								"name": "software",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "uint256",
								"name": "",
								"type": "uint256"
							}
						],
						"name": "result",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "bytes",
								"name": "_filedata",
								"type": "bytes"
							},
							{
								"internalType": "string",
								"name": "_patchname",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "_patchplatform",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "_patchfeatures",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "_patchno",
								"type": "uint256"
							},
							{
								"internalType": "uint256",
								"name": "_requestnumber",
								"type": "uint256"
							}
						],
						"name": "setPatch",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "string[]",
								"name": "_bugs",
								"type": "string[]"
							},
							{
								"internalType": "string[]",
								"name": "_features",
								"type": "string[]"
							},
							{
								"internalType": "string",
								"name": "_date",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "_requestno",
								"type": "uint256"
							},
							{
								"internalType": "string",
								"name": "_software",
								"type": "string"
							}
						],
						"name": "setRequest",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "verifier",
						"outputs": [
							{
								"internalType": "address",
								"name": "",
								"type": "address"
							}
						],
						"stateMutability": "view",
						"type": "function"
					}
				];
				const Address2 = "0x58d9825e8Cb33e78989FD76663A5774fB280bF4c";
				window.web3 = await new Web3(window.ethereum);
				window.contract3 = await new window.web3.eth.Contract(ABI2, Address2);
				const date = document.getElementById("Date").value;
				const requestNo = document.getElementById("RequestNo").value;

				window.contract3.methods.setRequest(arr_bugs, arr_features, date, requestNo, document.getElementById("mySelect").value).send({ from: account }).then((result) => {
					const transactionsuccess = document.getElementById('TransactionSuccessfull');
					const div = document.createElement('div')
					div.classList.add("alert", "alert-primary");
					div.role = "alert";

					div.innerHTML = "Transaction Successfull with Transaction ID - " + `${result.transactionHash}`
					transactionsuccess.appendChild(div)
					setTimeout(function () {

						window.location.reload();
					}, 3000);
				});


			}
			const showimage = () => {
				document.getElementById("showimage").innerHTML = '<img src="processflowfinal.jpg">';
				const close=document.createElement("btn");
				close.classList.add("btn","btn-dark")
				close.addEventListener('click',()=>{
					document.getElementById("showimage").innerHTML="";
				})
				close.textContent="close";
				document.getElementById("showimage").appendChild(close);
			}
			// document.addEventListener('click', (event) => {
			// 	document.getElementById("showimage").innerHTML = '';

			// });
		</script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
			crossorigin="anonymous"></script>
</body>

</html>